language: python

matrix:
 include:
  - os: linux
    python: 3.6
  - os: linux
    python: 3.7
  - os: linux
    python: 3.8

stages:
 - install
 - test
 - deploy

install:
 - pip install -r requirements-dev.txt

script:
 - coverage erase
 - coverage run -a --source ./sksurgerycalibration -m pytest -v -s ./tests/
 - coverage report -m

after_success:
 - coveralls

deploy:
 provider: pypi
 username: ...
 password: ...
 on:
  tags: true
  branch: master
